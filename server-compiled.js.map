{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["/**\n * Created by pablos on 5/3/17.\n */\nimport express from 'express';\nimport bodyParser   from 'body-parser';\nimport jwt from 'jsonwebtoken';\n\nlet secret = \"SOMECOOLSECRET\";\n\nlet accessToken = \"jK06rHVB3o0KJMerdolD8eSi570MVyMCdefSNip4\";\n\nlet app = express();\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\n\napp.listen(process.env.PORT || 3000, () => {\n    console.log('listening on 3000');\n});\n\napp.post(\"/auth\", (req, res) =>{\n    const email = \"email@email.com\";\n    const pass = \"pass\";\n    const body = jwt.verify(req.body.data, secret);\n    console.log(body);\n    if(body.username === email){\n        if(body.password === pass){\n            jwt.sign({\n                \"access_token\": accessToken,\n                \"token_type\": \"Bearer\",\n                \"expires_in\": 86400,\n                \"refresh_token\": \"GRq3UVgZh9wSENzTTlZ92eHeTzWMOAJL3HKKn6q4\",\n                \"user_id\": \"82\"\n            }, secret, (err, token) =>{\n                res.json(token)\n            });\n        }else{\n            res.status(500);\n            jwt.sign({\"message\": \"wrong password\"}, secret, (err, token) =>{\n                res.json(token)\n            });\n        }\n    }else{\n       res.status(500);\n        jwt.sign({\"message\": \"wrong username\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n});\n\nlet products = [\n    {\"name\": \"Press release\"},\n    {\"name\": \"Bylined article\"},\n    {\"name\": \"Blog post\"},\n    {\"name\": \"Company fact sheet\"},\n    {\"name\": \"Influence list\"},\n    {\"name\": \"Media list\"}\n];\n\napp.get('/products', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"products\": products\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n});\n\napp.post('/price', (req, res) =>{\n    if(req.headers.access_token === accessToken){\n        const body = jwt.verify(req.body.data, secret);\n        let dealine = new Date(body.date);\n        let diference = days_between(dealine, new Date());\n        var price = 0;\n        if(diference <= 6){\n            price = 10 * 500.00;\n        }else if(diference <= 12){\n            price = 8 * 500.00;\n        }else if(diference <= 18){\n            price =  6 * 500.00;\n        }else if(diference <= 20){\n            price = 5 * 500.00;\n        }else{\n            price = 3 * 500.00;\n        }\n        let tax = price * .28;\n        var finalPrice = Math.round(price + tax);\n        if(body.revision === false){\n            finalPrice -= 250\n        }\n        jwt.sign({\n            \"price\": finalPrice\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n\n});\n\nfunction days_between(date1, date2) {\n\n    // The number of milliseconds in one day\n    var ONE_DAY = 1000 * 60 * 60 * 24;\n\n    // Convert both dates to milliseconds\n    var date1_ms = date1.getTime();\n    var date2_ms = date2.getTime();\n\n    // Calculate the difference in milliseconds\n    var difference_ms = Math.abs(date1_ms - date2_ms);\n\n    // Convert back to days and return\n    return Math.round(difference_ms/ONE_DAY+1);\n\n}\n\nconst newProductAnouncement = {\n    required: [\n        {id:1, order: 0, title: \"Order Title\", description: \"This is not a title of the draft\", sample: \"\"},\n        {id:2, order: 1, title: \"What’s the news?\", description: \"What are we announcing?\", sample: \"CL Elec. launches the new CL ColorBook laptop series\"},\n        {id:3, order: 2, title: \"Differentiators/USPs\", description: \"What sets this apart from the rest (differentiators, unique selling points)? You can simply include links or attach documents.\", sample: \"It comes with seven customizable covers so users can change the covers based on their mood and TPO\"},\n        {id:4, order: 3, title: \"Key Features\", description: \"What are the important features? You can simply include links or attach documents.\", sample: \"\"},\n        {id:5, order: 4, title: \"Target Customers\", description: \"Who should buy this?\", sample: \"Millennial, female, style-conscious users\"},\n        {id:6, order: 5, title: \"Customer Benefits\", description: \"Why will it benefit them?\", sample: \"It’s fun and stylish to carry, they can match the cover with OOTD\"},\n        {id:7, order: 6, title: \"Related Industries\", description: \"What industries are related to this?\", sample: \"\"}\n    ],\n    type: \"press_release_new_product\",\n    optional: [\n        {id:1, order: 0, title: \"Three Key Messages\", description: \"What are the three key messages you’d like to highlight?\", sample: \"\"},\n        {id:2, order: 1, title: \"Relevant Trends\", description: \"What trends are relevant for this?\", sample: \"Gadget-as-a-fashion accessory trend\"},\n        {id:3, order: 2, title: \"Availability\", description: \"Availability (Time / Pricing)\", sample: \"Jan 2017/ starting at USD 380\"},\n        {id:4, order: 3, title: \"Customer Cases\", description: \"Can we cite any real customers or at least use cases?\", sample: \"\"},\n        {id:5, order: 4, title: \"Spokesperson\", description: \"Who should be quoted? (Name/Title)\", sample: \"\"},\n        {id:6, order: 5, title: \"Media Contact\", description: \"Media contact (name, phone number, email address)\", sample: \"\"},\n        {id:7, order: 6, title: \"Company Boilerplate\", description: \"\", sample: \"\"},\n        {id:8, order: 7, title: \"Distribution Date/City\", description: \"\", sample: \"\"},\n        {id:9, order: 8, title: \"Writing Style\", description: \"\", sample: \"\"},\n        {id:10, order:9, title: \"Previous Releases\", description: \"Any previous releases that will help us?\", sample: \"\"},\n        {id:11, order:10, title: \"Supporting Materials\", description: \"What about other materials and sources?\", sample: \"\"},\n        {id:12, order:11, title: \"Additional Note\", description: \"What else should we know?\", sample: \"We want to focus more on the design and affordability, and less on product performance which is still competitive among the entry level laptops but not outstanding. \\nWe want to position ColorBook as a fashion & lifestyle product, targeting fashion-conscious millennial users who use a laptop for content consumption, entertainment, social networking – not necessarily for heavy content creation\"}\n    ]\n};\n\napp.get('/brief', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"brief\": newProductAnouncement\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n});\n\nclass orderStatus{\n    constructor(name, status, action, description, addTime){\n        this.title = name;\n        this.state = status;\n        this.action = action;\n        this.description = description;\n        this.start = getUTCTimeStamp(addTime);\n        this.delivery = getUTCTimeStamp(addTime);\n    }\n}\n\nconst getUTCTimeStamp = (minutes) => {\n    let now = new Date();\n    now.setMinutes(minutes);\n    const date = Date.UTC(now.getUTCFullYear(),now.getUTCMonth(), now.getUTCDate() ,\n        now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n    return new Date(date).toISOString();\n};\n\nconst orderHistory = [\n    new orderStatus(\"Working in Order\", \"in_progress\", false, \"Currently we are working on your request, we carefully review the brief, do research and then start writing.\",2),\n    new orderStatus(\"Provide Feedback\", \"pending\", true, \"Review the work\",30),\n    new orderStatus(\"Working on Feedback\", \"pending\", false, \"We are making some changes\",60),\n    new orderStatus(\"Deliver Order\",\"pending\", false, \"\",90)\n];\n\napp.get('/order/status', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"history\": orderHistory\n        }, secret, (err, token) =>{\n            res.json(token);\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n});"]}