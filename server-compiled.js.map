{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["/**\n * Created by pablos on 5/3/17.\n */\nimport express from 'express';\nimport bodyParser   from 'body-parser';\nimport jwt from 'jsonwebtoken';\n\nlet secret = \"SOMECOOLSECRET\";\n\nlet accessToken = \"jK06rHVB3o0KJMerdolD8eSi570MVyMCdefSNip4\";\n\nlet app = express();\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\n\napp.listen(process.env.PORT || 3000, () => {\n    console.log('listening on 3000');\n});\n\napp.post(\"/auth\", (req, res) =>{\n    const email = \"email@email.com\";\n    const pass = \"pass\";\n    const body = jwt.verify(req.body.data, secret);\n    console.log(body);\n    if(body.username === email){\n        if(body.password === pass){\n            jwt.sign({\n                \"access_token\": accessToken,\n                \"token_type\": \"Bearer\",\n                \"expires_in\": 86400,\n                \"refresh_token\": \"GRq3UVgZh9wSENzTTlZ92eHeTzWMOAJL3HKKn6q4\",\n                \"user_id\": \"82\"\n            }, secret, (err, token) =>{\n                res.json(token)\n            });\n        }else{\n            res.status(500);\n            jwt.sign({\"message\": \"wrong password\"}, secret, (err, token) =>{\n                res.json(token)\n            });\n        }\n    }else{\n       res.status(500);\n        jwt.sign({\"message\": \"wrong username\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n});\n\nlet products = [\n    {\"name\": \"Press Release\"},\n    {\"name\": \"By Lined Article\"},\n    {\"name\": \"Blog Post\"},\n    {\"name\": \"Company Fact Sheet\"},\n    {\"name\": \"Influence & Media List\"}\n];\n\napp.get('/products', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"products\": products\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n});\n\napp.post('/price', (req, res) =>{\n    if(req.headers.access_token === accessToken){\n        const body = jwt.verify(req.body.data, secret);\n        let dealine = new Date(body.date);\n        let diference = days_between(dealine, new Date());\n        var price = 0;\n        if(diference < 3){\n            price = diference * 250.00;\n        }else if(diference < 6){\n            price = diference * 200.00;\n        }else if(diference < 12){\n            price =  diference * 175.00;\n        }else if(diference < 24){\n            price = diference * 150.00;\n        }else{\n            price = diference * 125.00;\n        }\n        let tax = price * .28;\n        var finalPrice = Math.round(price + tax);\n        if(body.revision === false){\n            finalPrice -= 300\n        }\n        jwt.sign({\n            \"price\": finalPrice\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n\n});\n\nfunction days_between(date1, date2) {\n\n    // The number of milliseconds in one day\n    var ONE_DAY = 1000 * 60 * 60 * 24;\n\n    // Convert both dates to milliseconds\n    var date1_ms = date1.getTime();\n    var date2_ms = date2.getTime();\n\n    // Calculate the difference in milliseconds\n    var difference_ms = Math.abs(date1_ms - date2_ms);\n\n    // Convert back to days and return\n    return Math.round(difference_ms/ONE_DAY+1);\n\n}\n\nconst newProductAnouncement = {\n    required: [\n        {id:1, order: 0, title: \"Order Title\", description: \"This is not a title of the draft\"},\n        {id:2, order: 1, title: \"What’s the news?\", description: \"What are we announcing?\"},\n        {id:3, order: 2, title: \"Differentiators/USPs\", description: \"What sets this apart from the rest(differentiators, unique selling points)?You can simply include links or attach documents.\"},\n        {id:4, order: 3, title: \"Key Features\", description: \"What are the important features? You can simply include links or attach documents.\"},\n        {id:5, order: 4, title: \"Target Customers\", description: \"Who should buy this?\"},\n        {id:6, order: 5, title: \"Customer Benefits\", description: \"Why will it benefit them?\"},\n        {id:7, order: 6, title: \"Related Industries\", description: \"What industries are related to this?\"}\n    ],\n    type: \"press_release_new_product\",\n    optional: [\n        {id:1, order: 0, title: \"Three Key Messages\", description: \"What are the three key messages you’d like to highlight?\"},\n        {id:2, order: 1, title: \"Relevant Trends\", description: \"What trends are relevant for this?\"},\n        {id:3, order: 2, title: \"Availability\", description: \"Availability (Time / Pricing)\"},\n        {id:4, order: 3, title: \"Customer Cases\", description: \"Can we cite any real customers or at least use cases?\"},\n        {id:5, order: 4, title: \"Spokesperson\", description: \"Who should be quoted? (Name/Title)\"},\n        {id:6, order: 5, title: \"Media Contact\", description: \"Media contact (name, phone number, email address)\"},\n        {id:7, order: 6, title: \"Company Boilerplate\", description: \"\"},\n        {id:8, order: 7, title: \"Distribution Date/City\", description: \"\"},\n        {id:9, order: 8, title: \"Writing Style\", description: \"\"},\n        {id:10, order:9, title: \"Previous Releases\", description: \"Any previous releases that will help us?\"},\n        {id:11, order:10, title: \"Supporting Materials\", description: \"What about other materials and sources?\"},\n        {id:12, order:11, title: \"Additional Note\", description: \"What else should we know?\"}\n    ]\n};\n\napp.get('/brief', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"brief\": newProductAnouncement\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n});"]}