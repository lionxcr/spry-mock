{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["/**\n * Created by pablos on 5/3/17.\n */\nimport express from 'express';\nimport bodyParser   from 'body-parser';\nimport jwt from 'jsonwebtoken';\n\nlet secret = \"SOMECOOLSECRET\";\n\nlet accessToken = \"jK06rHVB3o0KJMerdolD8eSi570MVyMCdefSNip4\";\n\nlet app = express();\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\n\napp.listen(process.env.PORT || 3000, () => {\n    console.log('listening on 3000');\n});\n\napp.post(\"/auth\", (req, res) =>{\n    const email = \"email@email.com\";\n    const pass = \"pass\";\n    const body = jwt.verify(req.body.data, secret);\n    console.log(body);\n    if(body.username === email){\n        if(body.password === pass){\n            jwt.sign({\n                \"access_token\": accessToken,\n                \"token_type\": \"Bearer\",\n                \"expires_in\": 86400,\n                \"refresh_token\": \"GRq3UVgZh9wSENzTTlZ92eHeTzWMOAJL3HKKn6q4\",\n                \"user_id\": \"82\"\n            }, secret, (err, token) =>{\n                res.json(token)\n            });\n        }else{\n            res.status(500);\n            jwt.sign({\"message\": \"wrong password\"}, secret, (err, token) =>{\n                res.json(token)\n            });\n        }\n    }else{\n       res.status(500);\n        jwt.sign({\"message\": \"wrong username\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n});\n\nlet products = [\n    {\"name\": \"Press Release\"},\n    {\"name\": \"By Lined Article\"},\n    {\"name\": \"Blog Post\"},\n    {\"name\": \"Company Fact Sheet\"},\n    {\"name\": \"Influence & Media List\"}\n];\n\napp.get('/products', (req, res) => {\n    if(req.headers.access_token === accessToken){\n        jwt.sign({\n            \"products\": products\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n});\n\napp.post('/price', (req, res) =>{\n    if(req.headers.access_token === accessToken){\n        const body = jwt.verify(req.body.data, secret);\n        let dealine = new Date(body.date);\n        let diference = days_between(dealine, new Date());\n        var price = diference * 125.00;\n        let tax = price * .28;\n        let finalPrice = Math.round(price + tax);\n        console.log(finalPrice);\n        jwt.sign({\n            \"price\": finalPrice\n        }, secret, (err, token) =>{\n            res.json(token)\n        });\n    }else{\n        res.status(401);\n        jwt.sign({\"message\": \"unauthorized request\"}, secret, (err, token) =>{\n            res.json(token)\n        });\n    }\n\n\n});\n\nfunction days_between(date1, date2) {\n\n    // The number of milliseconds in one day\n    var ONE_DAY = 1000 * 60 * 60 * 24;\n\n    // Convert both dates to milliseconds\n    var date1_ms = date1.getTime();\n    var date2_ms = date2.getTime();\n\n    // Calculate the difference in milliseconds\n    var difference_ms = Math.abs(date1_ms - date2_ms);\n\n    // Convert back to days and return\n    return Math.round(difference_ms/ONE_DAY+1);\n\n}"]}